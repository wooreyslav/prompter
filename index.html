<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>суфлер</title>
<style>
    html, body {
        margin: 0;
        padding: 0;
        height: 100%;
        background: #000;
        color: #fff;
        font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
        display: flex;
        justify-content: flex-start; /* ← теперь блок прижат к левому краю */
        align-items: flex-start;     /* ← блок прижат к верхнему краю */
        overflow: hidden;
    }

    #progress {
        position: fixed;
        top: 0;
        left: 0;
        height: 6px;
        width: 0%;
        background: #00ff99;
        transition: width 0.4s ease;
        z-index: 1000;
    }

    #text {
        font-size: 40px; /* под iPad Pro — около 10 строк по 55 символов */
        line-height: 1.4;
        padding: 40px;
        white-space: pre; /* ← сохраняет твои оригинальные переносы строк */
        text-align: left; /* ← выравнивание по левому краю */
        max-width: 90%;
        max-height: 90%;
        overflow-wrap: normal;
        padding-left: 40px;  /* отступ слева */
        padding-top: 40px;   /* отступ сверху */
    }

</style>
</head>
<body>

<div id="progress"></div>
<div id="text"></div>

<script>
  // ====== ТЕКСТ ПЕСЕН (--- это разделитель между секциями для перелистывания) ======
  const songText = `
<b>ОСТАНОВКА (BPM 112)</b>
<i>[куплет 1]</i>
Последний трамвай идет до депо
Я звезды черчу в запотевшем окне
Вроде опоздал, но мне все равно 
И, впрочем, не уверен даже в завтрашнем дне

Внезапно я понял, что это мой шанс
Узнать твое имя, пойти за тобой
Твой след - мой навигатор, покинутый трамвай
Откуда тебе знать, что я за твоей спиной
---
<i>[припев 1]</i>
Мне нужен только повод
Сделать первый шаг
Чтоб я бежал стоптав
В пыли свои кроссовки

Возможно, повод - ты
Подумал я дурак
Случайно выйдя с тобой
Не на своей остановке
---
<i>[куплет 2]</i>
Квартал за кварталом, закрытый «КБ»
Тропинка до дома дождливым сентябрём
Тебе не узнать, что могло бы случится
Останься мы здесь совершенно вдвоем

Представь, как мы расскажем всем твоим друзьям
О встрече на рельсах, как будто бы в кино
Но ты ускоришь шаг, подумав я маньяк
Торопливо ища ключи в своем пальто
---
<i>[припев 2]</i>
Мне нужен только повод
Сделать первый шаг
Чтоб я бежал стоптав
В пыли свои кроссовки

Возможно, повод - ты
Подумал я дурак
Случайно выйдя с тобой
Не на своей остановке
---
<b>ПАРЕНЬ НА ФОТО (BPM 104)</b>
<i>[куплет 1]</i>
Я давно не у дел, забил болт на работу
Я один, но в порядке, поверь все нормально
На часах полшестого, ностальгия напала
Вспоминаю былое, ты была идеальна
<i>[припев 1]</i>
Мое старое худи пропахло тобой
На балконе окурки и шумы объездной
Под слоями вещей, в глубинах комода
Улыбается твой бывший парень на фото
---
<i>[куплет 2]</i>
Этот мир уже давно перестал крутиться
Запахи цветов обернулись пылью
Образы в голове затянула тоска
Прокрутил много раз то, что должен сказать:

Все эти моменты, на которых мы выросли
Все эти порезы на наших руках
Синдром отложенной жизни? Да к черту
Я растворяю себя в пустяках
Я просто хотел стать важной частичкой
Жизни твоей, но что-то не вышло
Остаться забытой памятью лета
Тоже неплохо наверно
---
<i>[припев 2]</i>
Мое старое худи пропахло тобой
На балконе окурки и шумы объездной
Под слоями вещей, в глубинах комода
Улыбается твой бывший парень на фото
---
<b>2000 КМ (BPM 98)</b>
<i>[куплет 1]</i>
Миллионы сообщений
И пара дней с тобой в Москве 
Я, кажется, влюбился 
Додумав все в голове

А может ты захочешь
Купить билет в Кольцово
Было бы мило
Нам увидеться снова
---
<i>[припев 1]</i>
Я буду тебя ждать здесь
На Вознесенской горке
И солнце на закате
Робко улыбнется

Она не приедет
Я встречу рассвет один
2000 километров
Растворили эндорфин
---
<i>[куплет 2]</i>
Ну как ты там в своей Москве
Восьмиполосные шоссе
Они обвили все вокруг
И заглушили сердца стук
И я, наверное, скучаю
Внутри ненависть копя
Я ненавижу город твой
Чуть больше, чем люблю тебя
---
<i>[припев 2]</i>
Я буду тебя ждать здесь
На Вознесенской горке
И солнце на закате
Робко улыбнется

Она не приедет
Я встречу рассвет один
2000 километров
Растворили эндорфин
---
<b>Снова не здесь (BPM 118)</b>
<i>[куплет 1]</i>
Ночь. Свет фонаря и безумных идей
Освещая шаги под окном
Упавшие листья прожитых дней
Оказались вновь увиденным сном

В светлой ночи и свежести лета
Бежать с ведром KFC
Я хотел бы вернуть то время назад
Господи, сохрани и спаси
---
<i>[припев 1]</i>
Но ты снова не здесь,
ты снова не здесь
Ты снова сегодня не дома
---
<i>[куплет 2]</i>
Электрических скрежет когтей
И десятки ночных поездов
Принесут нам новых идей
И избавят от древних оков

...на мутном окне
Крадущийся грохот снаружи
Голос нашедший ответ в тишине
И кто-то по-прежнему нужен
---
<i>[припев 2]</i>
Но ты снова не здесь,
ты снова не здесь
Ты снова сегодня не дома
---
<b>Теплица (BPM 110)</b>
<i>[куплет 1]</i>
Теплица мой дом, в теплице спокойно
Ноги мои прочно вросли
За стеклом кружат убийцы
Готовы сорвать меня целиком

<i>[припев 1]</i>
Запах табака и самокруток
Это не беда - слетел с катушек
Зажигалки свет путь освещает
---
<i>[куплет 2]</i>
В зеркале разбитый
Памяти нет совсем
Долги обвили шею
А шея висит в петле

<i>[припев 2]</i>
Запах табака и самокруток
Это не беда - слетел с катушек
Зажигалки свет путь освещает
---
<b>Белый шум (BPM 104)</b>
<i>[куплет 1]</i>
Белый шум телевизора в углу
Не спешу писать тебе, я опять один лежу
Вся одежда свалена, перерезал провода
Стук часов не даст заснуть, медленно схожу с ума

<i>[куплет 2]</i>
Еда на доставке, задернуты шторы
Мой поезд диван, мой дом одиночество
Я просто держусь за остатки сознания
Мое одиночество на все оправдание
---
<i>[пре-припев]</i>
Я день и ночь поменял местами
Растворенный синего света тонами

<i>[припев]</i>
Прости меня, я не в состоянии
Поднять себя и из дома выйти
Мой сон ушел с последней банкой кофе
На улицы, где никто не ждет меня
Не ждет меня

<i>[аутро]</i>
Я день и ночь поменял местами
Растворенный синего света тонами
---
`;

    // ====== ЛОГИКА ПЕРЕКЛЮЧЕНИЯ ======
    const sections = songText.trim().split(/\r?\n-{3,}\r?\n/).map(s => s.trim());
    let current = 0;
    const textEl = document.getElementById('text');
    const progressEl = document.getElementById('progress');

    // ====== Функция авто-подгонки шрифта ======
    function adjustFontSize() {
        let fontSize = 42; // начальный размер
            textEl.style.fontSize = fontSize + 'px';
        while (textEl.scrollHeight > textEl.clientHeight && fontSize > 10) {
            fontSize -= 1;
            textEl.style.fontSize = fontSize + 'px';
        }
    }

    function updateProgress() {
        const percent = ((current + 1) / sections.length) * 100;
        progressEl.style.width = percent + '%';
    }

    function showSection(i) {
        if (i < 0) i = 0;
        if (i >= sections.length) i = sections.length - 1;
        current = i;
        textEl.innerHTML = sections[i]; // innerHTML для поддержки <b>, <i>
        adjustFontSize();               // подгонка размера под экран
        updateProgress();
    }

    function next() { showSection(current + 1); }
    function prev() { showSection(current - 1); }

    // Управление стрелками / педалью
    window.addEventListener('keydown', e => {
        if (["ArrowRight", "PageDown"].includes(e.key)) {
        next(); e.preventDefault();
        } else if (["ArrowLeft", "PageUp"].includes(e.key)) {
        prev(); e.preventDefault();
        }
    });

    // Показываем первую секцию сразу
    showSection(0);

    // Подстраиваем размер при изменении размера окна (например, ориентация iPad)
    window.addEventListener('resize', () => showSection(current));
</script>

</body>
</html>
